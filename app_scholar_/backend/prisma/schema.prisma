// ---------- DATASOURCE ----------
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ---------- GENERATOR ----------
generator client {
  provider = "prisma-client-js"
}

// ---------- MODELS -----------

// Usu√°rios do sistema (login e perfis)
model User {
  id        Int      @id @default(autoincrement())
  nome      String
  email     String   @unique
  password  String
  perfil    String   // "admin", "professor" ou "aluno"
  createdAt DateTime @default(now())
}

// Alunos
model Aluno {
  id        Int      @id @default(autoincrement())
  nome      String
  matricula String   @unique
  curso     String

  notas     Nota[]
}

// Professores
model Professor {
  id            Int      @id @default(autoincrement())
  nome          String
  titulacao     String
  tempoDocencia Int

  disciplinas   Disciplina[]
}

// Disciplinas
model Disciplina {
  id            Int      @id @default(autoincrement())
  nome          String
  cargaHoraria  Int
  professorId   Int

  professor     Professor @relation(fields: [professorId], references: [id])
  notas         Nota[]
}

// Notas
model Nota {
  id            Int      @id @default(autoincrement())
  nota1         Float
  nota2         Float
  createdAt     DateTime @default(now())

  alunoId       Int
  disciplinaId  Int

  aluno         Aluno      @relation(fields: [alunoId], references: [id])
  disciplina    Disciplina @relation(fields: [disciplinaId], references: [id])
}
